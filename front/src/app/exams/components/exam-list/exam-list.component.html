<div class="exam-list-container">
  <div class="header">
    <h1>Exames</h1>
    <a routerLink="/exams/new" class="btn-primary">
      Novo Exame
    </a>
  </div>

  <div class="content">
    <app-loading *ngIf="loading"></app-loading>

    <app-error-message *ngIf="error && !loading" [message]="error" (retry)="onRetry()">
    </app-error-message>

    <div *ngIf="!loading && !error" class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Nome do Paciente </th>
            <th>ID empotencykey </th>

            <th>Modalidade</th>
            <th>Descrição</th>
            <th>Data do Exame</th>
            <th>Criado em</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let exam of exams">
            <td>{{ exam.patient.name }}</td>
            <td><span>{{ exam.idempotencyKey }}</span></td>
            <td><span class="badge">{{ exam.modality }}</span></td>
            <td>
            <app-tooltip [text]="exam.description || 'Sem descrição'">
              {{ exam.description ? truncateText(exam.description, 20) : '-' }}
            </app-tooltip>
            </td>
            <td>{{ formatDateTime(exam.examDate) }}</td>
            <td>{{ formatDateTime(exam.createdAt) }}</td>
          </tr>
          <tr *ngIf="exams.length === 0">
            <td colspan="5" class="empty-message">
              Nenhum exame encontrado.
            </td>
          </tr>
        </tbody>
      </table>

      <div class="pagination">
        <button [disabled]="currentPage === 1 || loading" (click)="onPreviousPage()" class="btn-pagination">
          Anterior
        </button>
        <span class="page-info">Página {{ currentPage }}</span>
        <button [disabled]="!hasMore || loading" (click)="onNextPage()" class="btn-pagination">
          Próxima
        </button>
      </div>
    </div>
  </div>
</div>